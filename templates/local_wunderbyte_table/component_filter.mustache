{{!
    This file is part of Moodle - http://moodle.org/
    Moodle is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 3 of the License, or
    (at your option) any later version.
    Moodle is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.
    You should have received a copy of the GNU General Public License
    along with Moodle.  If not, see <http://www.gnu.org/licenses/>.
}}
{{!
    @template local_wunderbyte_table/viewtable
    Template which defines a mooduell view page.
    Classes required for JS:
    * none
    Data attributes required for JS:
    * none
    Context variables required for this template:
    * statistics - array: An array with values.
    * opengames - array: empty array, will be filled with JS.
    * finishedgames - array: empty array, will be filled with JS.
    * highscores - array: empty array, will be filled with JS.

    Example context (json):
    {
    "filter": {
        "categories": [
        {
            "collapsed": "collapsed",
            "uniqueid": "12345",
            "expanded": true,
            "name": "Category1",
            "columnname": "tablecolumn1",
            "category": "tablecolumn1",
            "default": true,
            "values": [
            {
                "value": "value1",
                "key": "Value1",
                "checked": "checked"
            },
            {
                "value": "value2",
                "key": "Value2",
                "checked": ""
            }
            ],
            "datepicker": false
        },
        {
            "collapsed": "",
            "uniqueid": "67890",
            "idstring": "sdkjafjlsadjflasjdklf",
            "expanded": false,
            "name": "Category2",
            "columnname": "tablecolumn2",
            "default": false,
            "values": [
            {
                "value": "value4",
                "key": "Value4",
                "checked": "",
                "count": "8"
            },
            {
                "value": "value5",
                "key": "Value5",
                "checked": "checked",
                "count": "5"
            }
            ],
            "datepicker": true,
            "datepickers": [
            {
                "timestamp": true,
                "label": "DatePicker1",
                "checkboxlabel": "Enable Date Picker 1",
                "datereadable": "2023-05-17",
                "timereadable": "09:30",
                "operator": "greater",
                "columnname": "column1",
                "startcolumn": "",
                "endcolumn": "",
                "starttimestamp": "",
                "startdatereadable": "",
                "starttimereadable": "",
                "endtimestamp": "",
                "enddatereadable": "",
                "endtimereadable": "",
                "possibleoperations": [
                {
                    "operator": "greater",
                    "label": "Greater than"
                },
                {
                    "operator": "less",
                    "label": "Less than"
                }
                ]
            },
            {
                "timestamp": false,
                "label": "DatePicker2",
                "checkboxlabel": "Enable Date Picker 2",
                "datereadable": "",
                "timereadable": "",
                "operator": "",
                "columnname": "column2",
                "startcolumn": "startcolumn",
                "endcolumn": "endcolumn",
                "starttimestamp": "123456",
                "startdatereadable": "2023-05-15",
                "starttimereadable": "12:00",
                "endtimestamp": "789012",
                "enddatereadable": "2023-05-19",
                "endtimereadable": "18:00",
                "possibleoperations": [
                {
                    "operator": "equals",
                    "label": "Equals"
                },
                {
                    "operator": "between",
                    "label": "Between"
                }
                ]
            }
            ]
        }
        ]
    }
    }

}}

{{#filter}}
    <div class="wunderbyteTableFilter row">
    <span class="d-flex align-items-center">
        <div class="svg-icon mr-2">
        <svg xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 22 22" fill="none">
            <path d="M0 3.89878C0.0408552 2.82609 0.49701 1.81365 1.2685 1.08334C2.04 0.35302 3.06392 -0.0356204 4.11588 0.00257055H18.0962C19.0944 -0.0332464 20.0658 0.335943 20.7975 1.02925C21.5293 1.72255 21.9617 2.6834 22 3.70126C21.9942 4.27863 21.8529 4.84622 21.5878 5.35643C21.3228 5.86664 20.9417 6.30462 20.4765 6.63373L14.06 11.3287C13.787 11.52 13.5594 11.7712 13.394 12.0638C13.2285 12.3564 13.1294 12.6831 13.1039 13.0199L12.7043 19.7198C12.6573 20.1396 12.5095 20.5412 12.2741 20.8889C12.0387 21.2367 11.723 21.5199 11.3548 21.7136C10.9866 21.9074 10.5773 22.0056 10.163 21.9997C9.74869 21.9939 9.3422 21.8839 8.97944 21.6798L7.87633 21.0948C7.40296 20.8525 7.00398 20.4822 6.72297 20.0244C6.44197 19.5665 6.28975 19.0387 6.28292 18.4986V12.7487C6.28027 12.46 6.22173 12.1746 6.11067 11.9091C5.99961 11.6435 5.83822 11.4029 5.63575 11.2012L1.09087 6.545C0.747541 6.19859 0.474502 5.7866 0.287328 5.33255C0.100155 4.87851 0.00251477 4.39131 0 3.89878ZM4.11588 1.88632C3.55884 1.85345 3.01166 2.04655 2.59373 2.42358C2.17581 2.8006 1.92109 3.33093 1.88513 3.89878C1.88751 4.14702 1.93799 4.39233 2.0337 4.62059C2.12942 4.84884 2.26845 5.05556 2.4428 5.22879L6.99382 9.88373C7.36577 10.2582 7.66168 10.7037 7.86464 11.1948C8.06759 11.686 8.17361 12.2132 8.17662 12.7462V18.4961C8.18271 18.693 8.24201 18.8844 8.34799 19.0492C8.45396 19.214 8.60249 19.3457 8.77719 19.4298L9.88033 20.0148C9.98139 20.0686 10.0935 20.0972 10.2075 20.0983C10.3214 20.0994 10.4341 20.0729 10.5361 20.0211C10.6186 19.9862 10.6901 19.929 10.743 19.8556C10.796 19.7823 10.8282 19.6955 10.8364 19.6048L11.236 12.9049C11.2785 12.2899 11.4553 11.6924 11.7535 11.156C12.0516 10.6196 12.4636 10.158 12.9593 9.80492L19.3758 5.11001C19.6013 4.95302 19.7867 4.74317 19.9164 4.49806C20.0461 4.25295 20.1162 3.97971 20.121 3.70126C20.0876 3.18846 19.8568 2.70992 19.4789 2.36994C19.101 2.02997 18.6066 1.85616 18.1035 1.88632H4.11588Z" fill="#001F33"/>
        </svg>
         </div>
            <p class="filternameurise">
    Filter</p>
        </span>
    {{#categories}}
    <div class="col dropdowncontainer dd">
    <div class="dropdown">
    <button
        {{#expanded}}
            aria-expanded="true"
        {{/expanded}}
        {{^expanded}}
            aria-expanded="false"
        {{/expanded}}
    aria-controls="id_collapse_{{columnname}}" class="btn dropdown-toggle dropdownMenuButton" type="button" data-ident="{{columnname}}" data-toggle="dropdown" aria-haspopup="true">
        {{name}} <span class="filtercounter badge badge-light {{^filtercounter}}hidden{{/filtercounter}}">{{filtercounter}}</span>
    </button>
    <div class="dropdown-menu">
       <div class="mt-2 ml-2 mr-2 {{show}}" id="id_collapse_{{columnname}}">
           <label class="pl-4 labelsearch">
                <span class="h6 small">{{ name }}</span>
            </label>
            <input class="search form-control mb-2 filtersearch" name="filtersearch-{{columnname}}" placeholder="{{#str}}search, core{{/str}}" hidden>
                {{#default}}
                    <ul class="wunderbyterFilterList pt-2 list-group-flush">
                        {{#values}}
                            <li class="form-check list-group-item dropdown-item">
                                    <input class="filterelement filterouter form-check-input" type="checkbox" value="{{value}}" id="{{key}}{{columnname}}{{idstring}}" {{checked}} name="{{category}}" data-action="csshide" data-key="{{key}}" data-targetvalue="{{value}}">
                                    <label class="form-check-label" for="{{key}}{{columnname}}{{idstring}}">
                                        <span class="filterkeylabel">{{key}}</span> <span class="filtercountlabel">{{#count}}({{count}}){{/count}}</span>
                                    </label>
                            </li>
                        {{/values}}
                    </ul>
                {{/default}}
                {{#hierarchy}}
                    <ul class="wunderbyterFilterList hierarchy pt-2" data-moodletype="hierarchylist">
                        <button class="btn btn-nolabel dropdown-item dropdown-toggle hierarchybutton text-wrap"  data-ident="{{columnname}}" data-toggle="collapse" href="javascript:void(0)" role="button" aria-controls="collapseExample">
                            <span class="filtercategorykeylabel">{{label}}</span> <span class="filtercategorycountlabel">{{#count}}({{count}}){{/count}}</span>
                        </button>
                        <div class="collapse" id="{{id}}">
                            <div class="card card-body">
                                {{#values}}
                                    <li class="form-check">
                                            <input class="filterelement form-check-input" type="checkbox" value="{{value}}" id="{{key}}{{columnname}}{{idstring}}" {{checked}} name="{{category}}" data-action="csshide" data-key="{{key}}" data-targetvalue="{{value}}">
                                            <label class="form-check-label" for="{{key}}{{columnname}}{{idstring}}">
                                                <span class="filterkeylabel">{{key}}</span> <span class="filtercountlabel">{{#count}}({{count}}){{/count}}</span>
                                            </label>
                                    </li>
                                {{/values}}
                            </div>
                        </div>

                    </ul>
                {{/hierarchy}}
                {{#datepicker}}
                    {{#datepickers}}
                        <form class="datepickerform">
                            {{#timestamp}}
                                <input class="filterelement form-check-input" type="checkbox" id="{{label}}{{columnname}}{{idstring}}" {{checked}} data-action="csshide" name="{{columnname}}" value="datecheckbox" data-dateelement = "dateelement" data-filtername="{{label}}" data-operator="{{operator}}" data-columnname="{{columnname}}">
                                <label class="filterelement form-check-label" for="{{label}}{{columnname}}{{idstring}}">{{checkboxlabel}}</label>
                                <div class="datepicker-label">{{label}}</div>
                                <input class="filterelement datepicker-input" type="date" id="{{label}}{{columnname}}{{idstring}}datefilter_date" value="{{datereadable}}" data-timestamp="{{timestamp}}" name="{{columnname}}_single-date" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}">
                                <input class="filterelement datepicker-input" type="time" id="{{label}}{{columnname}}{{idstring}}datefilter_time" name="{{columnname}}_single-time" value="{{timereadable}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}">
                            {{/timestamp}}
                            {{#startcolumn}}

                                <input class="filterelement form-check-input" type="checkbox" id="{{label}}{{columnname}}{{idstring}}" {{checked}} data-action="csshide" name="{{columnname}}" value="datecheckbox" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}" data-operator="{{operator}}" data-timespan="true">
                                <label class="filterelement form-check-label" for="{{label}}{{columnname}}{{idstring}}">{{checkboxlabel}}</label>
                                <div class="filtertimespan">
                                    <div class="datepicker-label">{{#str}} startvalue, local_wunderbyte_table {{/str}}</div>
                                    <input class="filterelement datepicker-input" type="date" id="startdate_date_{{startcolumn}}{{label}}{{columnname}}{{idstring}}" value="{{startdatereadable}}" data-timestamp="{{starttimestamp}}" name="date-{{startcolumn}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}" data-applytocolumn="{{startcolumn}}">
                                    <input class="filterelement datepicker-input" type="time" id="startdate_time_{{startcolumn}}{{label}}{{columnname}}{{idstring}}" name="time-{{startcolumn}}" value="{{starttimereadable}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}" data-applytocolumn="{{startcolumn}}">
                                    <div class="datepicker-label">{{#str}} endvalue, local_wunderbyte_table {{/str}}</div>
                                    <input class="filterelement datepicker-input" type="date" id="enddate_date_{{endcolumn}}{{label}}{{columnname}}{{idstring}}" value="{{enddatereadable}}" data-timestamp="{{endtimestamp}}" name="date-{{endcolumn}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}" data-applytocolumn="{{endcolumn}}">
                                    <input class="filterelement datepicker-input" type="time" id="enddate_time_{{endcolumn}}{{label}}{{columnname}}{{idstring}}" name="time-{{endcolumn}}" value="{{endtimereadable}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}" data-applytocolumn="{{endcolumn}}">
                                </div>
                                <div>
                                    <label for="filteroperationselect_{{label}}{{columnname}}{{idstring}}" class="datepicker-label">{{#str}} displayrecords, local_wunderbyte_table {{/str}}</label>
                                    <select class="form-control filterelement" id="filteroperationselect_{{label}}{{columnname}}{{idstring}}" name="{{columnname}}" data-dateelement = "dateelement" data-filtername="{{label}}" data-columnname="{{columnname}}">
                                        {{#possibleoperations}}
                                            <option value="{{operator}}">{{label}}</option>
                                        {{/possibleoperations}}
                                    </select>
                                    <div class="datepicker-label">{{#str}} selectedtimespan, local_wunderbyte_table {{/str}}</div>
                                </div>

                            {{/startcolumn}}
                        </form>
                    {{/datepickers}}
                {{/datepicker}}
            </div>
    {{! <a class="dropdown-item" href="#">Action</a>
    <a class="dropdown-item" href="#">Another action</a>
    <a class="dropdown-item" href="#">Something else here</a> }}
    </div>
</div>
</div>
    {{/categories}}
    </div>
{{/filter}}
